version: 1

entities:
  marketing.activityType:
    meta:
      titleSingular: Activity Type
      titlePlural: Activity Types
      descriptionPlural: Categories for marketing expenses
      routes:
        root: /marketing
        list: /marketing/setup/activity-types
        new: /marketing/setup/activity-types/new
        detail: /marketing/setup/activity-types/{id}
        edit: /marketing/setup/activity-types/{id}/edit
      breadcrumbs:
        - { label: Marketing, href: /marketing }
        - { label: Setup, href: /marketing/setup/activity-types }
      actions:
        createLabel: New Activity Type
        editLabel: Edit Activity Type
        saveCreateLabel: Create Activity Type
        saveUpdateLabel: Update Activity Type
        cancelLabel: Cancel
        deleteLabel: Delete
        deleteConfirmTitle: Delete Activity Type
        deleteConfirmBody: Are you sure you want to delete "{name}"? This action cannot be undone.

    # Schema-driven page security (source of truth for EntityList/Detail/Edit pages).
    security:
      list:
        roles: []
        authz: { entity: setup, verb: read, require_action: marketing.setup.activity-types.access, show_pages: true }
      detail:
        roles: []
        authz: { entity: setup, verb: read, require_action: marketing.setup.activity-types.access, show_pages: true }
      new:
        roles: []
        authz: { entity: setup, verb: read, require_action: marketing.setup.activity-types.access, show_pages: true }
      edit:
        roles: []
        authz: { entity: setup, verb: read, require_action: marketing.setup.activity-types.access, show_pages: true }

    storage:
      drizzleTable: marketingActivityTypes

    list:
      tableId: marketing.activityTypes
      uiStateVersion: 1
      pageSize: 25
      initialSort: { sortBy: name, sortOrder: asc }
      sortWhitelist: [name]
      defaultVisibleOnly: true
      initialColumnVisibility:
        name: true
        key: true
        category: true
        isActive: true
        isSystem: true
      columns:
        - name
        - key
        - category
        - isActive
        - isSystem

    fields:
      id: { type: text, label: ID }
      key: { type: text, label: Key, required: true }
      name: { type: text, label: Name, required: true }
      category: { type: text, label: Category }
      description: { type: textarea, label: Description }
      color: { type: text, label: Color }
      icon: { type: text, label: Icon }
      sortOrder: { type: number, label: Sort Order }
      isSystem: { type: boolean, label: System }
      isActive: { type: boolean, label: Active }
      createdAt: { type: datetime, label: Created }
      updatedAt: { type: datetime, label: Updated }

    form:
      sections:
        - id: activityType
          title: Activity Type
          layout: { columns: 2 }
          fields: [key, name, category, sortOrder, isActive, color, icon]
        - id: description
          title: Description
          layout: { columns: 1 }
          fields: [description]

    detail:
      summaryTitle: Details
      summaryFields: [key, name, category, isActive, isSystem, sortOrder, color, icon, description, createdAt, updatedAt]

